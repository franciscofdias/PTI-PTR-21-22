{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\ikaro\\\\Documents\\\\PTI-PTR-21-22\\\\ptir\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\ikaro\\\\Documents\\\\PTI-PTR-21-22\\\\ptir\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\ikaro\\\\Documents\\\\PTI-PTR-21-22\\\\ptir\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\ikaro\\\\Documents\\\\PTI-PTR-21-22\\\\ptir\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\ikaro\\\\Documents\\\\PTI-PTR-21-22\\\\ptir\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\ikaro\\\\Documents\\\\PTI-PTR-21-22\\\\ptir\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\ikaro\\\\Documents\\\\PTI-PTR-21-22\\\\ptir\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\ikaro\\\\Documents\\\\PTI-PTR-21-22\\\\ptir\\\\src\\\\routes\\\\register-page\\\\register.tsx\";\nimport React from \"react\";\nimport \"./register.css\";\nimport { GoogleLogin } from \"react-google-login\";\nimport { SHA256 } from \"crypto-js\";\nimport { SignUp as apiSignUp } from \"../../_services/api\";\nimport { Link } from \"react-router-dom\";\nimport { withTranslation } from \"react-i18next\";\nexport var Register = /*#__PURE__*/function (_React$Component) {\n  _inherits(Register, _React$Component);\n\n  function Register(props) {\n    var _this;\n\n    _classCallCheck(this, Register);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Register).call(this, props));\n\n    _this.responseGoogle = function (response) {\n      // verify it worked and call this.signup\n      console.log(response);\n    };\n\n    _this.state = {\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      repeatPassword: \"\",\n      accountType: \"\"\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } // Hanlde events\n\n\n  _createClass(Register, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      var target = event.target;\n      var value = target.value;\n      var name = target.name;\n\n      var newState = _defineProperty({}, name, value);\n\n      this.setState(newState);\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      var _this2 = this;\n\n      if (this.state.password === this.state.repeatPassword) {\n        this.signup(this.state.username, this.state.email, this.state.password, this.state.accountType).then(function (res) {\n          if (res) {\n            _this2.props.history.push(\"/login\");\n          } else {\n            // handle error message\n            console.log(res);\n          }\n        });\n      } else {\n        console.log(\"password is different\");\n      }\n\n      console.log(this.state);\n      event.preventDefault();\n    } // Promise handling request to api\n\n  }, {\n    key: \"signup\",\n    value: function signup(username, email, password, accountType) {\n      var promise = new Promise(function (resolve, reject) {\n        var passwordHash = SHA256(password);\n        apiSignUp(username, email, passwordHash.toString(), accountType).then(function (response) {\n          resolve(true);\n        }).catch(function (error) {\n          console.log(error);\n          reject();\n        });\n      });\n      return promise;\n    } // Google login\n\n  }, {\n    key: \"render\",\n    // Render webpage\n    value: function render() {\n      var _this3 = this;\n\n      var t = this.props.t;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"registerPage bg-main flex justify-center text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"md:w-3/6 m-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"text-8xl font-bold text-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }\n      }, \"Logo\"), /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-input mt-8 block w-full border-2 text-white border-white placeholder-white rounded-full pt-1 pb-1 pl-3 pr-3 bg-opacity-0 bg-white focus:outline-none focus:bg-white focus:text-black focus:ring-0 focus:border-transparent\",\n        name: \"username\",\n        type: \"text\",\n        placeholder: t('username'),\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-input mt-8 block w-full border-2 text-white border-white placeholder-white rounded-full pt-1 pb-1 pl-3 pr-3 bg-opacity-0 bg-white focus:outline-none focus:bg-white focus:text-black focus:ring-0 focus:border-transparent\",\n        name: \"email\",\n        type: \"email\",\n        placeholder: \"E-mail\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-input mt-8 block w-full border-2 text-white border-white placeholder-white rounded-full pt-1 pb-1 pl-3 pr-3 bg-opacity-0 bg-white focus:outline-none focus:bg-white focus:text-black focus:ring-0 focus:border-transparent\",\n        name: \"password\",\n        type: \"password\",\n        placeholder: t('password'),\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-input mt-8 block w-full border-2 text-white border-white placeholder-white rounded-full pt-1 pb-1 pl-3 pr-3 bg-opacity-0 bg-white focus:outline-none focus:bg-white focus:text-black focus:ring-0 focus:border-transparent\",\n        name: \"repeatPassword\",\n        type: \"password\",\n        placeholder: t('repeat-password'),\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex justify-around mt-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"inline-flex items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        className: \"form-radio text-black\",\n        name: \"accountType\",\n        value: \"Student\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"ml-2 text-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }\n      }, \"Student\")), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"inline-flex items-center ml-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        className: \"form-radio text-black\",\n        name: \"accountType\",\n        value: \"Host\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"ml-2 text-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }\n      }, \"Host\")), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"inline-flex items-center ml-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        className: \"form-radio text-black\",\n        name: \"accountType\",\n        value: \"ServiceProvider\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"ml-2 text-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 17\n        }\n      }, \"Service Provider\"))), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"w-full block mt-12 text-salmon font-bold text-2xl rounded-full pt-1 pb-2 focus:outline-none bg-white hover:bg-opacity-80 hover:bg-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }\n      }, t('sign-up'))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-white separator pt-4 mb-6 pl-4 pr-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }\n      }, t('sign-up-with')), /*#__PURE__*/React.createElement(GoogleLogin, {\n        clientId: \"435001531571-aolerdljkcbrobj2qarsk6u9f87i3nrh.apps.googleusercontent.com\",\n        jsSrc: \"https://apis.google.com/js/platform.js\",\n        render: function render(renderProps) {\n          return /*#__PURE__*/React.createElement(\"button\", {\n            className: \"rounded-full w-14 h-14 bg-white mx-auto focus:outline-none\",\n            onClick: renderProps.onClick,\n            disabled: renderProps.disabled,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(\"img\", {\n            className: \"w-12 h-12 mx-auto\",\n            src: \"../assets/google.png\",\n            alt: \"Sign in with Google\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }\n          }));\n        },\n        buttonText: \"Login\",\n        onSuccess: this.responseGoogle,\n        onFailure: this.responseGoogle,\n        cookiePolicy: \"single_host_origin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"text-white mt-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 9\n        }\n      }, t('have-account'), \"\\xA0\", /*#__PURE__*/React.createElement(Link, {\n        className: \"font-bold underline\",\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }\n      }, t('login')))));\n    }\n  }]);\n\n  return Register;\n}(React.Component);\nexport default withTranslation()(Register);","map":{"version":3,"sources":["C:/Users/ikaro/Documents/PTI-PTR-21-22/ptir/src/routes/register-page/register.tsx"],"names":["React","GoogleLogin","SHA256","SignUp","apiSignUp","Link","withTranslation","Register","props","responseGoogle","response","console","log","state","username","email","password","repeatPassword","accountType","handleChange","bind","handleSubmit","event","target","value","name","newState","setState","signup","then","res","history","push","preventDefault","promise","Promise","resolve","reject","passwordHash","toString","catch","error","t","renderProps","onClick","disabled","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./register.css\";\r\nimport { GoogleLogin } from \"react-google-login\";\r\nimport { SHA256 } from \"crypto-js\";\r\nimport { SignUp as apiSignUp } from \"../../_services/api\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\ninterface IAccountInfoState {\r\n  username: string;\r\n  email: string;\r\n  password: string;\r\n  repeatPassword: string;\r\n  accountType: string;\r\n}\r\n\r\nexport class Register extends React.Component<{ history: any, t: any }, IAccountInfoState> {\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      repeatPassword: \"\",\r\n      accountType: \"\",\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  // Hanlde events\r\n  handleChange(event: any) {\r\n    const target = event.target;\r\n    const value = target.value;\r\n    const name = target.name;\r\n    const newState = { [name]: value } as Pick<\r\n      IAccountInfoState,\r\n      keyof IAccountInfoState\r\n    >;\r\n    this.setState(newState);\r\n  }\r\n\r\n  handleSubmit(event: any) {\r\n    if (this.state.password === this.state.repeatPassword) {\r\n      this.signup(\r\n        this.state.username,\r\n        this.state.email,\r\n        this.state.password,\r\n        this.state.accountType\r\n      ).then((res) => {\r\n        if (res) {\r\n          this.props.history.push(\"/login\");\r\n        } else {\r\n          // handle error message\r\n          console.log(res);\r\n        }\r\n      });\r\n    } else {\r\n      console.log(\"password is different\");\r\n    }\r\n    console.log(this.state);\r\n    event.preventDefault();\r\n  }\r\n\r\n  // Promise handling request to api\r\n  signup(\r\n    username: string,\r\n    email: string,\r\n    password: string,\r\n    accountType: string\r\n  ) {\r\n    let promise = new Promise((resolve, reject) => {\r\n      let passwordHash = SHA256(password);\r\n      apiSignUp(username, email, passwordHash.toString(), accountType)\r\n        .then((response) => {\r\n          resolve(true);\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          reject();\r\n        });\r\n    });\r\n    return promise;\r\n  }\r\n\r\n  // Google login\r\n  responseGoogle = (response: any) => {\r\n    // verify it worked and call this.signup\r\n    console.log(response);\r\n  };\r\n\r\n  // Render webpage\r\n  render() {\r\n    const { t } = this.props\r\n    return (\r\n      <div className=\"registerPage bg-main flex justify-center text-center\">\r\n        <div className=\"md:w-3/6 m-auto\">\r\n          <h1 className=\"text-8xl font-bold text-white\">Logo</h1>\r\n          <form onSubmit={this.handleSubmit}>\r\n            <input\r\n              className=\"form-input mt-8 block w-full border-2 text-white border-white placeholder-white rounded-full pt-1 pb-1 pl-3 pr-3 bg-opacity-0 bg-white focus:outline-none focus:bg-white focus:text-black focus:ring-0 focus:border-transparent\"\r\n              name=\"username\"\r\n              type=\"text\"\r\n              placeholder={t('username')}\r\n              onChange={this.handleChange}\r\n            />\r\n            <input\r\n              className=\"form-input mt-8 block w-full border-2 text-white border-white placeholder-white rounded-full pt-1 pb-1 pl-3 pr-3 bg-opacity-0 bg-white focus:outline-none focus:bg-white focus:text-black focus:ring-0 focus:border-transparent\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              placeholder=\"E-mail\"\r\n              onChange={this.handleChange}\r\n            />\r\n            <input\r\n              className=\"form-input mt-8 block w-full border-2 text-white border-white placeholder-white rounded-full pt-1 pb-1 pl-3 pr-3 bg-opacity-0 bg-white focus:outline-none focus:bg-white focus:text-black focus:ring-0 focus:border-transparent\"\r\n              name=\"password\"\r\n              type=\"password\"\r\n              placeholder={t('password')}\r\n              onChange={this.handleChange}\r\n            />\r\n            <input\r\n              className=\"form-input mt-8 block w-full border-2 text-white border-white placeholder-white rounded-full pt-1 pb-1 pl-3 pr-3 bg-opacity-0 bg-white focus:outline-none focus:bg-white focus:text-black focus:ring-0 focus:border-transparent\"\r\n              name=\"repeatPassword\"\r\n              type=\"password\"\r\n              placeholder={t('repeat-password')}\r\n              onChange={this.handleChange}\r\n            />\r\n            <div className=\"flex justify-around mt-12\">\r\n              <label className=\"inline-flex items-center\">\r\n                <input\r\n                  type=\"radio\"\r\n                  className=\"form-radio text-black\"\r\n                  name=\"accountType\"\r\n                  value=\"Student\"\r\n                  onChange={this.handleChange}\r\n                />\r\n                <span className=\"ml-2 text-white\">Student</span>\r\n              </label>\r\n              <label className=\"inline-flex items-center ml-6\">\r\n                <input\r\n                  type=\"radio\"\r\n                  className=\"form-radio text-black\"\r\n                  name=\"accountType\"\r\n                  value=\"Host\"\r\n                  onChange={this.handleChange}\r\n                />\r\n                <span className=\"ml-2 text-white\">Host</span>\r\n              </label>\r\n              <label className=\"inline-flex items-center ml-6\">\r\n                <input\r\n                  type=\"radio\"\r\n                  className=\"form-radio text-black\"\r\n                  name=\"accountType\"\r\n                  value=\"ServiceProvider\"\r\n                  onChange={this.handleChange}\r\n                />\r\n                <span className=\"ml-2 text-white\">Service Provider</span>\r\n              </label>\r\n            </div>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"w-full block mt-12 text-salmon font-bold text-2xl rounded-full pt-1 pb-2 focus:outline-none bg-white hover:bg-opacity-80 hover:bg-white\"\r\n            >\r\n              {t('sign-up')}\r\n            </button>\r\n          </form>\r\n          <div className=\"text-white separator pt-4 mb-6 pl-4 pr-4\">\r\n            {t('sign-up-with')}\r\n          </div>\r\n          <GoogleLogin\r\n            clientId=\"435001531571-aolerdljkcbrobj2qarsk6u9f87i3nrh.apps.googleusercontent.com\"\r\n            jsSrc=\"https://apis.google.com/js/platform.js\"\r\n            render={(renderProps) => (\r\n              <button\r\n                className=\"rounded-full w-14 h-14 bg-white mx-auto focus:outline-none\"\r\n                onClick={renderProps.onClick}\r\n                disabled={renderProps.disabled}\r\n              >\r\n                <img\r\n                  className=\"w-12 h-12 mx-auto\"\r\n                  src=\"../assets/google.png\"\r\n                  alt=\"Sign in with Google\"\r\n                />\r\n              </button>\r\n            )}\r\n            buttonText=\"Login\"\r\n            onSuccess={this.responseGoogle}\r\n            onFailure={this.responseGoogle}\r\n            cookiePolicy={\"single_host_origin\"}\r\n          />\r\n        <p className=\"text-white mt-6\">\r\n          {t('have-account')}&nbsp;\r\n          <Link className=\"font-bold underline\" to=\"/login\">\r\n             {t('login')}\r\n          </Link>\r\n        </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withTranslation()(Register);"]},"metadata":{},"sourceType":"module"}